# Running the Fortran-ACDC

Program run_acdc_J_example.f90 contains an example of obtaining the steady-state formation rate by the Fortran version of ACDC. The Fortran package can also be dynamically coupled to an aerosol dynamics model by module get_acdc_J.f90.

The codes work directly with the given examples of equation files (acdc_equations_example.f90 and acdc_system_example.f90), and new equation files for different cluster systems can be easily generated by the Perl code as shown in run_perl.sh. See also the input files in the subfolder Perl_input.

In a nutshell, the main steps for running the Fortran package are
* Generate the cluster equations by run_perl.sh (or use the example files).
* Check the main simulation settings in module acdc_simulation_setup:
    * Perform steady-state simulations or run for a given time by setting the solve_ss parameter.
    * Choose how to treat vapor monomer concentrations in the subroutine sources_and_constants. By default, concentrations of electrically neutral monomers are constant for steady-state simulations, and otherwise they are allowed to evolve in time.
* If you use Fortran-ACDC as a standalone model, set the simulated conditions in the main program run_acdc_J_example. You can e.g. write loops over different vapor concentrations or other conditions. You also need to write some code for outputting the results if you want to save them in files.
* If you want to couple ACDC to an aerosol dynamics model, add the call to subroutine acdc_plugin directly to your aerosol model (run_acdc_J_example is not needed). Ensure that solve_ss = .false.
* Compile and run the program. Ensure that the Makefile includes the correct acdc_equations and acdc_system files.

See the ACDC manual for more information.